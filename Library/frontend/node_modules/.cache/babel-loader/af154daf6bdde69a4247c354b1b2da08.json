{"ast":null,"code":"import _slicedToArray from \"/home/yoosuf/yoosuf/my_projects/ag_hedge_project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/yoosuf/yoosuf/my_projects/ag_hedge_project/frontend/src/components/book.tsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { TableContainer, Table, TableHead, TableRow, TableCell, TableBody, Button } from \"@material-ui/core\";\nimport { BookTableRow } from \"./row\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\nimport useStyles from \"./style\";\nexport function Book(_ref) {\n  var _this = this;\n  var books = _ref.books,\n    isLoggedIn = _ref.isLoggedIn,\n    handleBorrow = _ref.handleBorrow;\n  console.log(\"isLoggedIn::\", isLoggedIn);\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    user = _useState2[0],\n    setUser = _useState2[1];\n  var classes = useStyles();\n  useEffect(function () {\n    var userId = Cookies.get(\"userId\");\n    if (userId) {\n      axios.get(\"http://localhost:4000/api/v1/users/\".concat(userId)).then(function (response) {\n        setUser(response.data);\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, []);\n  var handleLogout = function handleLogout() {\n    Cookies.remove(\"userId\");\n    window.location.href = \"/\";\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.logoutContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 6\n    }\n  }, isLoggedIn && /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"secondary\",\n    onClick: handleLogout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }, \"Logout\")), /*#__PURE__*/React.createElement(TableContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 1\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    className: classes.table,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.tableCell,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, \"Sl No:\"), /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.tableCell,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, \"Book Name\"), /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.tableCell,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, \"Author\"), isLoggedIn && /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.tableCell,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 24\n    }\n  }, \"Copies\"), isLoggedIn && /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.tableCell,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 24\n    }\n  }, \"Borrow\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }\n  }, books.map(function (book, index) {\n    return /*#__PURE__*/React.createElement(BookTableRow, {\n      key: book.id,\n      book: book,\n      isLoggedIn: isLoggedIn,\n      handleBorrow: handleBorrow,\n      user: user,\n      classes: classes,\n      serialNumber: index + 1,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }\n    });\n  })))));\n}\nexport default Book;","map":{"version":3,"names":["React","useState","useEffect","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","Button","BookTableRow","axios","Cookies","useStyles","Book","_ref","_this","books","isLoggedIn","handleBorrow","console","log","_useState","_useState2","_slicedToArray","user","setUser","classes","userId","get","concat","then","response","data","catch","error","handleLogout","remove","window","location","href","createElement","Fragment","className","logoutContainer","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","variant","color","onClick","table","tableCell","map","book","index","key","id","serialNumber"],"sources":["/home/yoosuf/yoosuf/my_projects/ag_hedge_project/frontend/src/components/book.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nimport {\n  Typography,\n  TableContainer,\n  Table,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableBody,\n  Button,\n} from \"@material-ui/core\";\nimport { BookTableRow, BookTableRowProps } from \"./row\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\nimport useStyles from \"./style\";\n\nexport interface Book {\n  id: number;\n  author: string;\n  book_name: string;\n  copies: number;\n  is_active: boolean;\n  is_available: boolean;\n  is_delete: boolean;\n}\n\nexport interface BooksTableProps {\n  books: Book[];\n  isLoggedIn: boolean;\n  handleBorrow: (bookId: number) => Promise<void>;\n}\n\nexport function Book({ books, isLoggedIn, handleBorrow }: BooksTableProps) {\n  console.log(\"isLoggedIn::\",isLoggedIn)\n  const [user, setUser] = useState(null);\n  const classes = useStyles();\n\n  useEffect(() => {\n    const userId = Cookies.get(\"userId\");\n    if (userId) {\n      axios\n        .get(`http://localhost:4000/api/v1/users/${userId}`)\n        .then((response) => {\n          setUser(response.data);\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    }\n  }, []);\n  const handleLogout = () => {\n    Cookies.remove(\"userId\");\n    window.location.href = \"/\";\n  };\n\n  return (\n    <>\n     {/* <Typography variant=\"h1\" className={classes.heading}>Books</Typography> */}\n     <div className={classes.logoutContainer}>\n        {isLoggedIn && (\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            onClick={handleLogout}\n          >\n            Logout\n          </Button>\n        )}\n      </div>\n<TableContainer>\n  <Table className={classes.table}>\n    <TableHead>\n      <TableRow>\n      <TableCell className={classes.tableCell}>Sl No:</TableCell>\n        <TableCell className={classes.tableCell}>Book Name</TableCell>\n        <TableCell className={classes.tableCell}>Author</TableCell>\n        {isLoggedIn && <TableCell className={classes.tableCell}>Copies</TableCell>}\n        {/* <TableCell className={classes.tableCell}>Availability</TableCell> */}\n        {isLoggedIn && <TableCell className={classes.tableCell}>Borrow</TableCell>}\n      </TableRow>\n    </TableHead>\n    <TableBody>\n      {books.map((book, index) => (\n        <BookTableRow\n          key={book.id}\n          book={book}\n          isLoggedIn={isLoggedIn}\n          handleBorrow={handleBorrow}\n          user={user}\n          classes={classes}\n          serialNumber={index + 1}\n        />\n      ))}\n    </TableBody>\n  </Table>\n</TableContainer>\n\n    </>\n  );\n}\n\nexport default Book;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAElD,SAEEC,cAAc,EACdC,KAAK,EACLC,SAAS,EACTC,QAAQ,EACRC,SAAS,EACTC,SAAS,EACTC,MAAM,QACD,mBAAmB;AAC1B,SAASC,YAAY,QAA2B,OAAO;AACvD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,SAAS,MAAM,SAAS;AAkB/B,OAAO,SAASC,IAAIA,CAAAC,IAAA,EAAuD;EAAA,IAAAC,KAAA;EAAA,IAApDC,KAAK,GAAAF,IAAA,CAALE,KAAK;IAAEC,UAAU,GAAAH,IAAA,CAAVG,UAAU;IAAEC,YAAY,GAAAJ,IAAA,CAAZI,YAAY;EACpDC,OAAO,CAACC,GAAG,CAAC,cAAc,EAACH,UAAU,CAAC;EAAA,IAAAI,SAAA,GACdrB,QAAQ,CAAC,IAAI,CAAC;IAAAsB,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA/BG,IAAI,GAAAF,UAAA;IAAEG,OAAO,GAAAH,UAAA;EACpB,IAAMI,OAAO,GAAGd,SAAS,CAAC,CAAC;EAE3BX,SAAS,CAAC,YAAM;IACd,IAAM0B,MAAM,GAAGhB,OAAO,CAACiB,GAAG,CAAC,QAAQ,CAAC;IACpC,IAAID,MAAM,EAAE;MACVjB,KAAK,CACFkB,GAAG,uCAAAC,MAAA,CAAuCF,MAAM,CAAE,CAAC,CACnDG,IAAI,CAAC,UAACC,QAAQ,EAAK;QAClBN,OAAO,CAACM,QAAQ,CAACC,IAAI,CAAC;MACxB,CAAC,CAAC,CACDC,KAAK,CAAC,UAACC,KAAK,EAAK;QAChBf,OAAO,CAACe,KAAK,CAACA,KAAK,CAAC;MACtB,CAAC,CAAC;IACN;EACF,CAAC,EAAE,EAAE,CAAC;EACN,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAA,EAAS;IACzBxB,OAAO,CAACyB,MAAM,CAAC,QAAQ,CAAC;IACxBC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,GAAG;EAC5B,CAAC;EAED,oBACExC,KAAA,CAAAyC,aAAA,CAAAzC,KAAA,CAAA0C,QAAA,qBAEC1C,KAAA,CAAAyC,aAAA;IAAKE,SAAS,EAAEhB,OAAO,CAACiB,eAAgB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACpChC,UAAU,iBACTlB,KAAA,CAAAyC,aAAA,CAAChC,MAAM;IACL0C,OAAO,EAAC,WAAW;IACnBC,KAAK,EAAC,WAAW;IACjBC,OAAO,EAAEjB,YAAa;IAAAS,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACvB,QAEO,CAEP,CAAC,eACZlD,KAAA,CAAAyC,aAAA,CAACtC,cAAc;IAAA0C,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACblD,KAAA,CAAAyC,aAAA,CAACrC,KAAK;IAACuC,SAAS,EAAEhB,OAAO,CAAC2B,KAAM;IAAAT,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC9BlD,KAAA,CAAAyC,aAAA,CAACpC,SAAS;IAAAwC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACRlD,KAAA,CAAAyC,aAAA,CAACnC,QAAQ;IAAAuC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACTlD,KAAA,CAAAyC,aAAA,CAAClC,SAAS;IAACoC,SAAS,EAAEhB,OAAO,CAAC4B,SAAU;IAAAV,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,QAAiB,CAAC,eACzDlD,KAAA,CAAAyC,aAAA,CAAClC,SAAS;IAACoC,SAAS,EAAEhB,OAAO,CAAC4B,SAAU;IAAAV,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,WAAoB,CAAC,eAC9DlD,KAAA,CAAAyC,aAAA,CAAClC,SAAS;IAACoC,SAAS,EAAEhB,OAAO,CAAC4B,SAAU;IAAAV,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,QAAiB,CAAC,EAC1DhC,UAAU,iBAAIlB,KAAA,CAAAyC,aAAA,CAAClC,SAAS;IAACoC,SAAS,EAAEhB,OAAO,CAAC4B,SAAU;IAAAV,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,QAAiB,CAAC,EAEzEhC,UAAU,iBAAIlB,KAAA,CAAAyC,aAAA,CAAClC,SAAS;IAACoC,SAAS,EAAEhB,OAAO,CAAC4B,SAAU;IAAAV,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,QAAiB,CACjE,CACD,CAAC,eACZlD,KAAA,CAAAyC,aAAA,CAACjC,SAAS;IAAAqC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACPjC,KAAK,CAACuC,GAAG,CAAC,UAACC,IAAI,EAAEC,KAAK;IAAA,oBACrB1D,KAAA,CAAAyC,aAAA,CAAC/B,YAAY;MACXiD,GAAG,EAAEF,IAAI,CAACG,EAAG;MACbH,IAAI,EAAEA,IAAK;MACXvC,UAAU,EAAEA,UAAW;MACvBC,YAAY,EAAEA,YAAa;MAC3BM,IAAI,EAAEA,IAAK;MACXE,OAAO,EAAEA,OAAQ;MACjBkC,YAAY,EAAEH,KAAK,GAAG,CAAE;MAAAb,MAAA,EAAA7B,KAAA;MAAA8B,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CACzB,CAAC;EAAA,CACH,CACQ,CACN,CACO,CAEV,CAAC;AAEP;AAEA,eAAepC,IAAI"},"metadata":{},"sourceType":"module"}